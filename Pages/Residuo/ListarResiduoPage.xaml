<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiFirebase.Pages.Residuo.ListarResiduoPage"
             xmlns:residuosVm="clr-namespace:MauiFirebase.PageModels.Residuos"
             Title="Listado de Residuos">

    <StackLayout Padding="10">

        <!-- Botón para agregar residuo -->
        <Button Text="Agregar Residuo" Clicked="OnAgregarResiduoClicked" />

        <!-- Lista de residuos -->
        <CollectionView ItemsSource="{Binding ListaResiduos}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Border Margin="5" Padding="10" StrokeShape="RoundRectangle 8">
                        <StackLayout>
                            <Label Text="{Binding NombreResiduo}" FontSize="18" />
                            <Label Text="{Binding EstadoResiduo, StringFormat='Estado: {0}'}" />
                            <Label Text="{Binding CategoriaResiduoSeleccionada}" />

                            <StackLayout Orientation="Horizontal" Spacing="10">
                                <!-- Botón para editar -->
                                <Button Text="Editar"
                                        Clicked="OnEditarResiduoClicked"
                                        CommandParameter="{Binding}" />

                                <!-- Botón para cambiar estado -->
                                <Button Text="Cambiar Estado"
                                        Command="{Binding Source={x:Reference Name=PageBinding}, Path=BindingContext.CambiarEstadoResiduoCommand}"
                                        CommandParameter="{Binding IdResiduo}" />
                            </StackLayout>
                        </StackLayout>
                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </StackLayout>
</ContentPage>
